@model List<serverDashboard.Models.Client>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"> 

<div class="navbar">
    <div id="logoSection">
        <i class="fa-regular fa-square"></i>
        <p id="name">SigNEX</p>
    </div>
    <div class="client-buttons">
        @for (int i = 0; i < Model.Count; i++)
        {
            <button class="client-btn" onclick="showClient(@i)">@Model[i].ClientName</button>
        }
    </div>
    <div id="fill1"></div>
    <div id="settingSection">
        <i class="fa-solid fa-gear"></i>
        <i class="fa-solid fa-user"></i>    
    </div>
</div>

<h1 class="title">System health Dashboard</h1>
<p id="secondTitle">Real-time server health and service performance monitoring</p>


<div class="firstCardSection">
    <div class="firstCardSectioncard">
        <p>Overall System Status</p>     
    </div>
    <div class="firstCardSectioncard">
        <P>Active Alerts</P>
     
    </div>
    <div class="firstCardSectioncard">
        <p>Avg API Response Time</p>

    </div>    
</div>

<div class="secondCardSection">
    <div class="leftColumn">
        <h3>System Resources</h3>
        <div class="firstLeftSection">
            <div class="firstLeftcard">
                CPU Usage %   
            </div>
            <div class="firstLeftcard">
                Memory Utilization  
            </div>

        </div>
        <h3>Application & Service Metrics</h3>
        <div class="secondLeftSection">
            <div class="secondLeftcard">
                Service Status  
            </div>
            <div class="secondLeftcard">
                API Endpoint Latency
            </div>
        

        </div>
    </div>
    <div class="rightColumn">
        <div class="rightColumnCard">
            <h3>Recent Alerts</h3>
        </div>
    </div>
</div>

<div class="thirdCardSection">
    <div class="thirdCardSectionCard">
        <h3>Historical CPU LOad(24 Hours)</h3>
    </div>
</div>

<div class="fourthCardSection">
    <div class="fourthCardSectionCard">
        <h3>System Logs</h3>
    </div>
</div>

<div class="footer">
    SigNEX Dashboard v1.2.0 | <span>Support</span>
</div>



<h2 id="clientName">@Model[0].ClientName</h2>

<table id="serverTable">
    <thead>
        <tr>
            <th>Server</th>
            <th>Status</th>
            <th>CPU %</th>
            <th>RAM Used</th>
            <th>Storage</th>
            <th>Latency (ms)</th>
            <th>Error Rate (%)</th>
            <th>Docs Signed</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var s in Model[0].Servers)
        {
            <tr>
                <td>@s.ServerName</td>
                <td>@s.Status</td>
                <td>@s.CpuUsagePercent</td>
                <td>@s.RamUsedGb / @s.TotalRamGb</td>
                <td>@s.StorageUsedGb / @s.TotalStorageGb</td>
                <td>@s.RequestLatencyMs</td>
                <td>@s.ErrorRatePercent</td>
                <td>@s.DocumentsSignedLastHour</td>
            </tr>
        }
    </tbody>
</table>

<script>
    const clients = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model));

    function showClient(index) {
        const client = clients[index];
        document.getElementById("clientName").innerText = client.ClientName;

        const tbody = document.getElementById("serverTable").querySelector("tbody");
        tbody.innerHTML = "";

        client.Servers.forEach(s => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${s.ServerName}</td>
                <td>${s.Status}</td>
                <td>${s.CpuUsagePercent}</td>
                <td>${s.RamUsedGb} / ${s.TotalRamGb}</td>
                <td>${s.StorageUsedGb} / ${s.TotalStorageGb}</td>
                <td>${s.RequestLatencyMs}</td>
                <td>${s.ErrorRatePercent}</td>
                <td>${s.DocumentsSignedLastHour}</td>
            `;
            tbody.appendChild(row);
        });
    }
</script>
